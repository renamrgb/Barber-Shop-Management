"use strict";(self["webpackChunkbsm"]=self["webpackChunkbsm"]||[]).push([[7],{8776:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(1505);class r{url="/stockEntry";async getAllPaged(e,t){try{const a=await l.Z.get(`${this.url}/paged?dtStart=${t.dtStart}&dtEnd=${t.dtEnd}&page=${e}`);return a.data}catch(a){return a}}async getById(e){try{const t=await l.Z.get(`${this.url}/${e}`);return t.data}catch(t){return t}}async getByDescriptionPaged(e,t,a){try{const r=await l.Z.get(`${this.url}/paged?dtStart=${a.dtStart}&dtEnd=${a.dtEnd}&supplier=${e}&page=${t}`);return r.data}catch(r){return r}}async save(e){try{const t=await l.Z.post(`${this.url}`,e);return t}catch(t){return t}}async reverse(e){try{const t=await l.Z.post(`${this.url}/reverse/${e}`);return t}catch(t){return t}}}},5691:(e,t,a)=>{a.d(t,{Z:()=>l});class l{agora=(new Date).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo"});dateNowISO(){const[e,t,a]=this.agora.split(/[\/\s,:]+/),l=`${a}-${t.padStart(2,"0")}-${e.padStart(2,"0")}`;return l}date(e,t,a){return"+"==a?e.setDate(e.getDate()+t):e.setDate(e.getDate()-t),this.formatDateISO(e.toLocaleString())}formatDateISO(e){const[t,a,l]=e.split(/[\/\s,:]+/),r=`${l}-${a.padStart(2,"0")}-${t.padStart(2,"0")}`;return r}compareDates(e){const t=new Date(e),a=new Date(this.formatDateISO(this.agora)),l=a.getTime()-t.getTime(),r=864e5,s=Math.floor(l/r);return s}}},5017:(e,t,a)=>{a.d(t,{Z:()=>l});class l{toDateBr(e){const t=new Date(e);let a=t.getUTCDate().toString().padStart(2,"0"),l=(t.getUTCMonth()+1).toString().padStart(2,"0"),r=t.getUTCFullYear(),s=`${a}/${l}/${r}`;return s}}},2362:(e,t,a)=>{a.d(t,{Z:()=>b});var l=a(3396),r=a(7139);const s={key:0},o={class:"pagination"},n={class:"page-item"},i=(0,l._)("span",{"aria-hidden":"true"},"«",-1),d=[i],u=["onClick"],c={class:"page-item"},p=(0,l._)("span",{"aria-hidden":"true"},"»",-1),g=[p];function m(e,t,a,i,p,m){return p.totalPages>0?((0,l.wg)(),(0,l.iD)("nav",s,[(0,l._)("ul",o,[(0,l._)("li",n,[(0,l._)("a",{class:"page-link",onClick:t[0]||(t[0]=e=>m.previous()),"aria-label":"Previous"},d)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(p.totalPages,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,r.C_)([{active:m.isActive(e)},"page-item"]),key:e},[(0,l._)("a",{class:"page-link",onClick:t=>m.setNumberPage(e)},(0,r.zw)(e),9,u)],2)))),128)),(0,l._)("li",c,[(0,l._)("a",{class:"page-link",onClick:t[1]||(t[1]=e=>m.next()),"aria-label":"Next"},g)])])])):(0,l.kq)("",!0)}const h={name:"NextPageTable",props:{pageId:{type:Number,required:!0}},data(){return{page:this.pageId,totalPages:0,totalElements:0,last:!1,pageable:{pageNumber:0,pageSize:0}}},methods:{isActive(e){return e-1==this.pageable.pageNumber},setNumberPage(e){this.pageable.pageNumber=e-1,this.$emit("update-pageId",this.pageable.pageNumber)},previous(){0!=this.pageable.pageNumber&&(this.pageable.pageNumber=this.pageable.pageNumber-1,this.$emit("update-pageId",this.pageable.pageNumber))},next(){this.pageable.pageNumber<this.totalPages-1&&(this.pageable.pageNumber=this.pageable.pageNumber+1,this.$emit("update-pageId",this.pageable.pageNumber))}}};var w=a(89);const f=(0,w.Z)(h,[["render",m]]),b=f},5066:(e,t,a)=>{a.d(t,{Z:()=>d});var l=a(3396),r=a(7139);function s(e,t,a,s,o,n){const i=(0,l.up)("CToastBody"),d=(0,l.up)("CToast"),u=(0,l.up)("CToaster");return(0,l.wg)(),(0,l.j4)(u,{placement:"top-end"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.toasts,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{key:t,color:o.color},{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l._)("b",null,(0,r.zw)(e.content),1)])),_:2},1024)])),_:2},1032,["color"])))),128))])),_:1})}const o={data(){return{toasts:[],color:"info"}},methods:{createToast(e){this.color="light",this.toasts.push({content:e})},createToastDanger(e){this.color="danger",this.toasts.push({content:e})},createToastWarning(e){this.color="warning",this.toasts.push({content:e})}}};var n=a(89);const i=(0,n.Z)(o,[["render",s]]),d=i},2007:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var l=a(3396),r=a(9242),s=a(7139);const o=e=>((0,l.dD)("data-v-3d376c42"),e=e(),(0,l.Cn)(),e),n=o((()=>(0,l._)("h4",null,"Entrada de produtos em estoque",-1))),i={class:"row mb-3"},d={class:"col-md-12 mx-auto"},u={class:"input-group"},c={class:"input-group-append"},p={class:"row mb-2"},g={class:"col"},m={class:"row mb-3"},h={class:"col-2"},w={class:"col-2"},f={class:"bdr"};function b(e,t,a,o,b,_){const C=(0,l.up)("CCol"),k=(0,l.up)("CIcon"),y=(0,l.up)("router-link"),v=(0,l.up)("CRow"),W=(0,l.up)("CCardHeader"),D=(0,l.up)("CFromLabel"),x=(0,l.up)("CCardBody"),$=(0,l.up)("CCard"),T=(0,l.up)("CTableHeaderCell"),N=(0,l.up)("CTableRow"),S=(0,l.up)("CTableHead"),P=(0,l.up)("CTableDataCell"),E=(0,l.up)("CButton"),I=(0,l.up)("CTableBody"),U=(0,l.up)("CTable"),Z=(0,l.up)("NextPageTable"),B=(0,l.up)("CModalTitle"),z=(0,l.up)("CModalHeader"),H=(0,l.up)("CModalBody"),O=(0,l.up)("CModalFooter"),A=(0,l.up)("CModal"),F=(0,l.up)("toast");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,{xs:12},{default:(0,l.w5)((()=>[(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(C,{id:"teste-align"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{to:"/stock/launchProducts"},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{icon:"cil-playlist-add",size:"xxl"})])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",d,[(0,l._)("div",u,[(0,l.wy)((0,l._)("input",{class:"form-control border-end-0 border rounded-pill",type:"search",placeholder:"Nome do fornecedor...",id:"example-search-input","onUpdate:modelValue":t[0]||(t[0]=e=>b.searchText=e)},null,512),[[r.nr,b.searchText]]),(0,l._)("span",c,[(0,l._)("button",{class:"btn btn-outline-secondary bg-dark border-bottom-0 border rounded-pill ms-n5",type:"button",onClick:t[1]||(t[1]=(...e)=>_.getBySupplier&&_.getBySupplier(...e))},[(0,l.Wm)(k,{icon:"cil-magnifying-glass",size:"x"})])])])])]),(0,l.Wm)($,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,null,{default:(0,l.w5)((()=>[(0,l._)("div",p,[(0,l._)("div",g,[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Data da nota fiscal:")])),_:1})])]),(0,l._)("div",m,[(0,l._)("div",h,[(0,l.wy)((0,l._)("input",{type:"date",name:"",id:"",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>b.filter.dtStart=e)},null,512),[[r.nr,b.filter.dtStart]])]),(0,l._)("div",w,[(0,l.wy)((0,l._)("input",{type:"date",name:"",id:"",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>b.filter.dtEnd=e)},null,512),[[r.nr,b.filter.dtEnd]])])])])),_:1})])),_:1}),(0,l._)("div",f,[(0,l.Wm)(U,{responsive:"xl"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"table-dark"},{default:(0,l.w5)((()=>[(0,l.Wm)(N,null,{default:(0,l.w5)((()=>[(0,l.Wm)(T,{scope:"col"},{default:(0,l.w5)((()=>[(0,l.Uk)("#")])),_:1}),(0,l.Wm)(T,{scope:"col"},{default:(0,l.w5)((()=>[(0,l.Uk)("Fornecedor")])),_:1}),(0,l.Wm)(T,{scope:"col"},{default:(0,l.w5)((()=>[(0,l.Uk)("Valor")])),_:1}),(0,l.Wm)(T,{scope:"col"},{default:(0,l.w5)((()=>[(0,l.Uk)("Data da NFE")])),_:1}),(0,l.Wm)(T,{scope:"col"})])),_:1})])),_:1}),(0,l.Wm)(I,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.itens,(e=>((0,l.wg)(),(0,l.j4)(N,{key:e.id},{default:(0,l.w5)((()=>[(0,l.Wm)(T,{scope:"row"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.id),1)])),_:2},1024),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.supplier),1)])),_:2},1024),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Uk)("R$ "+(0,s.zw)(e.nfe.valueNfe.toFixed(2)),1)])),_:2},1024),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(b.formatDateBr.toDateBr(e.nfe.dateofPurchase)),1)])),_:2},1024),(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[0==e.reversed?((0,l.wg)(),(0,l.j4)(E,{key:0,color:"light",style:{"margin-right":"1%"},onClick:()=>{b.modalExcluir=!0,b.id=e.id}},{default:(0,l.w5)((()=>[(0,l.Uk)(" Estornar ")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(E,{color:"light",style:{"margin-right":"1%"},onClick:t=>this.alterar(e.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(k,{icon:"cil-clipboard"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,l.Wm)(Z,{ref:"nextPageTable","page-id":b.pageId,onUpdatePageId:_.updatePageId},null,8,["page-id","onUpdatePageId"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Wm)(A,{visible:b.modalExcluir,onClose:t[7]||(t[7]=()=>{b.modalExcluir=!1})},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{dismiss:"",onClose:t[4]||(t[4]=()=>{b.modalExcluir=!1})},{default:(0,l.w5)((()=>[(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Deseja excluir esse item?")])),_:1})])),_:1}),(0,l.Wm)(H,null,{default:(0,l.w5)((()=>[(0,l.Uk)("O item será excluído permanentemente do banco de dados.")])),_:1}),(0,l.Wm)(O,null,{default:(0,l.w5)((()=>[(0,l.Wm)(E,{color:"secondary",onClick:t[5]||(t[5]=()=>{b.modalExcluir=!1})},{default:(0,l.w5)((()=>[(0,l.Uk)("Cancelar")])),_:1}),(0,l.Wm)(E,{color:"primary",onClick:t[6]||(t[6]=e=>this.estornar())},{default:(0,l.w5)((()=>[(0,l.Uk)("Confirmar")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,l.Wm)(F,{ref:"toast"},null,512)],64)}var _=a(8776),C=a(5066),k=a(6947),y=a(2362),v=a(5691),W=a(5017);const D={components:{Toast:C.Z,CForm:k.lx,NextPageTable:y.Z,CTableDataCell:k.NN},name:"Listar Lançamentos de Produtos",data(){return{id:"",dateNow:new v.Z,service:new _.Z,formatDateBr:new W.Z,itens:"",modalExcluir:!1,id:"",searchText:"",pageId:0,searchText:"",filter:{dtStart:"",dtEnd:""}}},methods:{getDate(){this.filter.dtStart=this.dateNow.date(new Date,30,"-"),this.filter.dtEnd=this.dateNow.dateNowISO()},async getBySupplier(){let e=await this.service.getByDescriptionPaged(this.searchText,this.pageId,this.filter);this.itens=e.content},async gelAll(){let e=await this.service.getAllPaged(this.pageId,this.filter);this.itens=e.content},alterar(e){this.$router.push({path:`/stock/launchProducts/${e}`})},updatePageId(e){this.pageId=e,this.getExpenses()},payOffExpense(e){this.$refs.quitarDespesa.visibleLiveDemo=!0,this.$refs.quitarDespesa.expense=e},async estornar(){const e=await this.service.reverse(this.id);console.log(e),200!=e.status&&this.$refs.toast.createToastDanger(`Ocorreu um erro ao realizar a operação ${e}`),this.modalExcluir=!1}},mounted(){this.getDate(),this.gelAll()}};var x=a(89);const $=(0,x.Z)(D,[["render",b],["__scopeId","data-v-3d376c42"]]),T=$}}]);
//# sourceMappingURL=7.ed789462.js.map