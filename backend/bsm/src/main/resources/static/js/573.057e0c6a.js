"use strict";(self["webpackChunkbsm"]=self["webpackChunkbsm"]||[]).push([[573],{9573:(s,e,r)=>{r.r(e),r.d(e,{default:()=>Z});var o=r(3396),a=r(7139),t=r(9242);const i=(0,o._)("strong",null,"Profissionais",-1),d={class:"mb-3"},l={key:0,class:"invalid-input-form"},m={class:"mb-3"},n={key:0,class:"invalid-input-form"},u={class:"row mb-3"},c={class:"row mb-3"},f={class:"mb-3"},h={key:0,class:"invalid-input-form"},p={class:"mb-3"},v={class:"mb-3"},w=(0,o._)("br",null,null,-1),g={class:"d-grid gap-2 d-md-flex justify-content-md-end"},$=(0,o._)("a",{href:"/#/forms/profissional",class:"btn btn-danger"},"Cancelar",-1);function U(s,e,r,U,b,F){const P=(0,o.up)("CCardHeader"),C=(0,o.up)("CFormLabel"),y=(0,o.up)("CFormInput"),_=(0,o.up)("PasswordForUserVue"),k=(0,o.up)("DocumentForUser"),W=(0,o.up)("Multiselect"),M=(0,o.up)("AddressForUser"),V=(0,o.up)("CFormSwitch"),q=(0,o.up)("CButton"),x=(0,o.up)("CForm"),N=(0,o.up)("CCardBody"),Z=(0,o.up)("CCard"),A=(0,o.up)("CCol"),D=(0,o.up)("CRow"),L=(0,o.up)("toast"),S=(0,o.Q2)("mask");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A,{xs:12},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"mb-4"},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[i])),_:1}),(0,o.Wm)(N,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o.Wm)(C,{for:"nome"},{default:(0,o.w5)((()=>[(0,o.Uk)("* Nome")])),_:1}),(0,o.Wm)(y,{name:"nome",type:"text",placeholder:"",modelValue:b.form.user.name,"onUpdate:modelValue":e[0]||(e[0]=s=>b.form.user.name=s)},null,8,["modelValue"]),b.v$.form.user.name.$errors.length>0?((0,o.wg)(),(0,o.iD)("div",l,(0,a.zw)(b.v$.form.user.name.$errors[0].$message),1)):(0,o.kq)("",!0)]),(0,o._)("div",m,[(0,o.Wm)(C,{for:"email"},{default:(0,o.w5)((()=>[(0,o.Uk)("* E-mail")])),_:1}),(0,o.Wm)(y,{name:"email",type:"email",placeholder:"exemplo@gmail.com",modelValue:b.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=s=>b.form.user.email=s)},null,8,["modelValue"]),b.v$.form.user.email.$errors.length>0?((0,o.wg)(),(0,o.iD)("div",n,(0,a.zw)(b.v$.form.user.email.$errors[0].$message),1)):(0,o.kq)("",!0)]),(0,o.Wm)(_,{passwordProps:this.form.user.password,ref:"passwordForUser"},null,8,["passwordProps"]),(0,o._)("div",u,[(0,o._)("div",c,[(0,o.Wm)(k,{ref:"documentForUser",typePersonProps:this.form.user.typePerson,documentProps:this.form.user.document,rgProps:this.form.user.rg},null,8,["typePersonProps","documentProps","rgProps"])])]),(0,o._)("div",f,[(0,o.Wm)(C,{for:"telefone"},{default:(0,o.w5)((()=>[(0,o.Uk)("* Telefone / Celular")])),_:1}),(0,o.wy)((0,o._)("input",{name:"telefone",type:"tel",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>b.form.user.phoneNumber=s)},null,512),[[S,["(##) #####-####"]],[t.nr,b.form.user.phoneNumber]]),b.v$.form.user.phoneNumber.$errors.length>0?((0,o.wg)(),(0,o.iD)("div",h,(0,a.zw)(b.v$.form.user.phoneNumber.$errors[0].$message),1)):(0,o.kq)("",!0)]),(0,o._)("div",p,[(0,o.Wm)(C,{for:"procedure"},{default:(0,o.w5)((()=>[(0,o.Uk)("* Procedimentos que o profissional realiza")])),_:1}),(0,o.Wm)(W,{modelValue:b.value,"onUpdate:modelValue":e[3]||(e[3]=s=>b.value=s),label:"description",trackBy:"description",options:b.options,searchable:!0,mode:"tags",onInput:e[4]||(e[4]=s=>F.teste())},null,8,["modelValue","options"])]),(0,o.Wm)(M,{ref:"addressForUser",addressProps:this.form.user.address},null,8,["addressProps"]),(0,o._)("div",v,[w,(0,o.Wm)(V,{name:"formSwitchCheckDefault",label:"Ativo",modelValue:b.form.user.isActive,"onUpdate:modelValue":e[5]||(e[5]=s=>b.form.user.isActive=s)},null,8,["modelValue"])]),(0,o._)("div",g,[(0,o.Wm)(q,{color:"primary",class:"me-md-2",onClick:F.submitForm},{default:(0,o.w5)((()=>[(0,o.Uk)("Confirmar")])),_:1},8,["onClick"]),$])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(L,{ref:"toast"},null,512)],64)}var b=r(3053),F=r(7829),P=r(6294),C=r(7853),y=r(5459),_=r(5066),k=r(7749),W=r(9229),M=r(1299),V=r(9367);const q={components:{Toast:_.Z,Multiselect:k.Z,DocumentForUser:W.Z,AddressForUser:M.Z,PasswordForUserVue:V.Z},name:"Profissional",data(){return{v$:(0,b.Xw)(),validationsMessage:new F.Z,id:this.$route.params.id,service:new P.Z,procedimentoService:new C.Z,addressService:new y.Z,form:{user:{name:"",email:"",password:"",phoneNumber:"",typePerson:"",document:"",rg:"",address:{zipCode:"",publicPlace:"",neighborhood:"",complement:"",city:"",state:""},nivelAcesso:{authority:"ROLE_ADMIN"},isActive:!1},procedures:[]},value:[],options:[]}},validations(){return{form:{user:{name:{required:this.validationsMessage.requiredMessage,maxLength:this.validationsMessage.maxLengthMenssage(100)},email:{required:this.validationsMessage.requiredMessage,maxLength:this.validationsMessage.maxLengthMenssage(100),email:this.validationsMessage.emailMessage},phoneNumber:{required:this.validationsMessage.requiredMessage,maxLength:this.validationsMessage.maxLengthMenssage(15)}}}}},methods:{submitForm(){this.$refs.passwordForUser.setPasswordNotUpdate(),this.v$.$validate(),this.v$.$error||this.$refs.passwordForUser.btnChangePassword||!this.$refs.passwordForUser.isValid()?!this.v$.$error&&this.$refs.passwordForUser.btnChangePassword&&this.salvar():this.salvar()},async salvar(){let s;if(this.form.user.address=this.$refs.addressForUser.address,this.form.user.document=this.$refs.documentForUser.document,this.form.user.rg=this.$refs.documentForUser.rg,this.form.user.typePerson=this.$refs.documentForUser.typePerson,this.form.user.address=this.$refs.addressForUser.address,this.form.user.password=this.$refs.passwordForUser.password,this.value.forEach((s=>{this.form.procedures.push({id:s})})),void 0==this.id?s=await this.service.cadastrar(this.form):(this.form.password="",s=await this.service.alterar(this.id,this.form)),console.log(s),201==s.status)this.$refs.toast.createToast("Cadastrado com sucesso!"),this.$router.push("/forms/profissional");else if(200==s.status)this.$refs.toast.createToast("Alterado com sucesso!");else{let e=s.response.data.fieldErrors;e.forEach((s=>{this.$refs.toast.createToast(`[${s.fieldName}] ${s.message}`)}))}},async consultarUm(){if(void 0!=this.id){this.form.user=await this.service.buscarUm(this.id);for(const s of this.form.user.procedures)this.value.push(s.id);this.$refs.documentForUser.typePerson=this.form.user.typePerson,this.$refs.documentForUser.document=this.form.user.document,this.$refs.documentForUser.rg=this.form.user.rg,this.$refs.addressForUser.address=this.form.user.address,this.$refs.addressForUser.change=!0,this.$refs.passwordForUser.password=this.form.user.password}},async carregarSelectProcedimentos(){const s=await this.procedimentoService.consultarTodos();for(const e of s)this.options.push({value:e.id,description:e.description})},teste(){console.log(this.value)}},mounted(){this.carregarSelectProcedimentos(),void 0!=this.id&&(this.consultarUm(),this.$refs.passwordForUser.btnChangePassword=!0)}};var x=r(89);const N=(0,x.Z)(q,[["render",U]]),Z=N}}]);
//# sourceMappingURL=573.057e0c6a.js.map