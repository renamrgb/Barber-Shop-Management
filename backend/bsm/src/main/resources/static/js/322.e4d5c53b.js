"use strict";(self["webpackChunkbsm"]=self["webpackChunkbsm"]||[]).push([[322],{7853:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(1505);class s{url="/procedures";async updateOrInsert(e,t){return void 0==e?await this.cadastrar(t):await this.alterar(e,t)}async consultarTodos(){try{const e=await a.Z.get(this.url);return e.data}catch(e){return e}}async getAllPaged(e){try{const t=await a.Z.get(`${this.url}/paged?page=${e}`);return t.data}catch(t){return t}}async getByDescriptionPaged(e,t){try{const r=await a.Z.get(`${this.url}/paged?description=${e}&page=${t}`);return r.data}catch(r){return r}}async cadastrar(e){try{const t=await a.Z.post(this.url,e);return t}catch(t){return t}}async excluir(e){try{const t=await a.Z["delete"](`${this.url}/${e}`);return t}catch(t){return t}}async alterar(e,t){try{const r=await a.Z.put(`${this.url}/${e}`,t);return r}catch(r){return r}}async buscarUm(e){try{const t=await a.Z.get(`${this.url}/${e}`);return t.data}catch(t){return t}}async getByDescription(e){try{const t=await a.Z.get(`${this.url}?description=${e}`);return t.data}catch(t){return t}}}},5925:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(1505);class s{url="/productProcedureTypes";async consultarTodos(){try{const e=await a.Z.get(this.url);return e.data}catch(e){return e}}async getAllPaged(e){try{const t=await a.Z.get(`${this.url}/paged?page=${e}`);return t.data}catch(t){return t}}async cadastrar(e){try{const t=await a.Z.post(this.url,e);return t}catch(t){return t}}async excluir(e){try{const t=await a.Z["delete"](`${this.url}/${e}`);return t}catch(t){return t}}async alterar(e,t){try{const r=await a.Z.put(`${this.url}/${e}`,t);return r}catch(r){return r}}async buscarUm(e){try{const t=await a.Z.get(`${this.url}/${e}`);return t.data}catch(t){return t}}async getByDescription(e){try{const t=await a.Z.get(`${this.url}?description=${e}`);return t.data}catch(t){return t}}async getByDescriptionPaged(e,t){try{const r=await a.Z.get(`${this.url}/paged?description=${e}&page=${t}`);return r.data}catch(r){return r}}}},322:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var a=r(3396),s=r(7139);const o=(0,a._)("strong",null,"Procedimentos",-1),i={class:"mb-3"},n={key:0,class:"invalid-input-form"},l={class:"row mb-3"},c={class:"col"},u={class:"row"},d={class:"col"},m={key:0,class:"invalid-input-form"},p={class:"col"},h={key:0,class:"invalid-input-form"},f={class:"mb-3"},g=(0,a._)("br",null,null,-1),y={class:"d-grid gap-2 d-md-flex justify-content-md-end"},$=(0,a._)("a",{href:"/#/forms/procedimento",class:"btn btn-danger"},"Cancelar",-1);function v(e,t,r,v,w,C){const _=(0,a.up)("CCardHeader"),b=(0,a.up)("CFormLabel"),Z=(0,a.up)("CFormInput"),k=(0,a.up)("CFormSelect"),W=(0,a.up)("CInputGroupText"),U=(0,a.up)("CInputGroup"),V=(0,a.up)("CFormSwitch"),M=(0,a.up)("CButton"),T=(0,a.up)("CForm"),D=(0,a.up)("CCardBody"),P=(0,a.up)("CCard"),q=(0,a.up)("CCol"),S=(0,a.up)("CRow"),x=(0,a.up)("toast");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{xs:12},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{class:"mb-4"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.Wm)(b,{for:"description"},{default:(0,a.w5)((()=>[(0,a.Uk)("* Descrição")])),_:1}),(0,a.Wm)(Z,{name:"description",type:"text",modelValue:w.form.description,"onUpdate:modelValue":t[0]||(t[0]=e=>w.form.description=e),modelModifiers:{lazy:!0},required:""},null,8,["modelValue"]),w.v$.form.description.$errors.length>0?((0,a.wg)(),(0,a.iD)("div",n,(0,s.zw)(w.v$.form.description.$errors[0].$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",l,[(0,a._)("div",c,[(0,a.Wm)(b,{for:"typeExpense"},{default:(0,a.w5)((()=>[(0,a.Uk)("* Tipo De Procedimento")])),_:1}),(0,a.Wm)(k,{modelValue:w.form.procedureType.id,"onUpdate:modelValue":t[1]||(t[1]=e=>w.form.procedureType.id=e),options:w.optionsSelect,searchable:!0},null,8,["modelValue","options"])])]),(0,a._)("div",u,[(0,a._)("div",d,[(0,a.Wm)(b,{for:"price"},{default:(0,a.w5)((()=>[(0,a.Uk)("* Preço")])),_:1}),(0,a.Wm)(U,{class:"mb-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Uk)("R$")])),_:1}),(0,a.Wm)(Z,{price:"price",modelValue:w.form.price,"onUpdate:modelValue":t[2]||(t[2]=e=>w.form.price=e),modelModifiers:{lazy:!0},min:"0",required:""},null,8,["modelValue"])])),_:1}),w.v$.form.price.$errors.length>0?((0,a.wg)(),(0,a.iD)("div",m,(0,s.zw)(w.v$.form.price.$errors[0].$message),1)):(0,a.kq)("",!0)]),(0,a._)("div",p,[(0,a.Wm)(b,{for:"price"},{default:(0,a.w5)((()=>[(0,a.Uk)("* Tempo de duração")])),_:1}),(0,a.Wm)(k,{options:w.optionsDuration,searchable:!0,modelValue:w.form.duration,"onUpdate:modelValue":t[3]||(t[3]=e=>w.form.duration=e)},null,8,["options","modelValue"]),w.v$.form.duration.$errors.length>0?((0,a.wg)(),(0,a.iD)("div",h,(0,s.zw)(w.v$.form.duration.$errors[0].$message),1)):(0,a.kq)("",!0)])]),(0,a._)("div",f,[g,(0,a.Wm)(V,{id:"formSwitchCheckDefault",label:"Ativo",modelValue:w.form.isActive,"onUpdate:modelValue":t[4]||(t[4]=e=>w.form.isActive=e)},null,8,["modelValue"])]),(0,a._)("div",y,[(0,a.Wm)(M,{color:"primary",class:"me-md-2",onClick:C.submitForm},{default:(0,a.w5)((()=>[(0,a.Uk)("Confirmar")])),_:1},8,["onClick"]),$])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,{ref:"toast"},null,512)],64)}var w=r(7853),C=r(5066),_=r(3053),b=r(7829),Z=r(5925);const k={components:{Toast:C.Z},name:"Procedimento",data(){return{v$:(0,_.Xw)(),validationsMessage:new b.Z,typeProductProcedureService:new Z.Z,id:this.$route.params.id,service:new w.Z,form:{description:"",price:"",duration:"",procedureType:{id:""},isActive:!1},optionsSelect:["Abra este menu de seleção"],optionsDuration:["00:30:00","01:00:00","01:30:00","02:00:00","02:30:00","03:00:00"]}},validations(){return{form:{description:{required:this.validationsMessage.requiredMessage,maxLength:this.validationsMessage.maxLengthMenssage(60)},price:{required:this.validationsMessage.requiredMessage,decimal:this.validationsMessage.decimalMessage,minValue:this.validationsMessage.minMenssage(.1)},duration:{required:this.validationsMessage.requiredMessage}}}},methods:{submitForm(e){console.log(this.form.duration),this.v$.$validate(),this.v$.$error||this.salvar()},async salvar(){let e=await this.service.updateOrInsert(this.id,this.form);if(201==e.status)this.$refs.toast.createToast("Cadastrado com sucesso!"),this.$router.push("/forms/procedimento");else if(200==e.status)this.$refs.toast.createToast("Alterado com sucesso!");else if(500==e.status)this.$refs.toast.createToast(e.error);else{console.log(e);let t=e.response.data.fieldErrors;t.forEach((e=>{this.$refs.toast.createToast(` [${e.fieldName}] ${e.message} `)}))}},async carregarOptionsSelect(){let e=await this.typeProductProcedureService.consultarTodos();e.forEach((e=>{this.optionsSelect.push({value:e.id,label:e.description,generateInstallments:e.generateInstallments})}))},async consultarUm(){void 0!=this.id&&(this.form=await this.service.buscarUm(this.id)),console.log(this.form.duration)}},mounted(){this.carregarOptionsSelect(),void 0!=this.id&&this.consultarUm()}};var W=r(89);const U=(0,W.Z)(k,[["render",v]]),V=U}}]);
//# sourceMappingURL=322.e4d5c53b.js.map