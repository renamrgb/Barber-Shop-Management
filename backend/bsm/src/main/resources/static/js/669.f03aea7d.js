"use strict";(self["webpackChunkbsm"]=self["webpackChunkbsm"]||[]).push([[669],{7853:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(1505);class l{url="/procedures";async updateOrInsert(e,t){return void 0==e?await this.cadastrar(t):await this.alterar(e,t)}async consultarTodos(){try{const e=await s.Z.get(this.url);return e.data}catch(e){return e}}async getAllPaged(e){try{const t=await s.Z.get(`${this.url}/paged?page=${e}`);return t.data}catch(t){return t}}async getByDescriptionPaged(e,t){try{const a=await s.Z.get(`${this.url}/paged?description=${e}&page=${t}`);return a.data}catch(a){return a}}async cadastrar(e){try{const t=await s.Z.post(this.url,e);return t}catch(t){return t}}async excluir(e){try{const t=await s.Z["delete"](`${this.url}/${e}`);return t}catch(t){return t}}async alterar(e,t){try{const a=await s.Z.put(`${this.url}/${e}`,t);return a}catch(a){return a}}async buscarUm(e){try{const t=await s.Z.get(`${this.url}/${e}`);return t.data}catch(t){return t}}async getByDescription(e){try{const t=await s.Z.get(`${this.url}?description=${e}`);return t.data}catch(t){return t}}}},7316:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(3396);function l(e,t,a,l,r,i){const o=(0,s.up)("CIcon"),n=(0,s.up)("CModalTitle"),c=(0,s.up)("CModalHeader"),u=(0,s.up)("CModalBody"),d=(0,s.up)("CButton"),p=(0,s.up)("CModalFooter"),m=(0,s.up)("CModal"),g=(0,s.up)("toast");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("td",null,[1==r.isActive?((0,s.wg)(),(0,s.j4)(o,{key:0,icon:"cil-check",size:"xl"})):0==r.isActive?((0,s.wg)(),(0,s.j4)(o,{key:1,icon:"cil-x-circle",size:"xl"})):(0,s.kq)("",!0)]),(0,s._)("td",null,[(0,s.Wm)(o,{icon:"cil-trash",size:"xl",onClick:t[0]||(t[0]=()=>{r.modalExcluir=!0,e.idItem=e.id})}),(0,s.Wm)(o,{icon:"cil-pencil",size:"xl",onClick:t[1]||(t[1]=t=>this.alterar(e.id))})]),(0,s.Wm)(m,{visible:r.modalExcluir,onClose:t[4]||(t[4]=()=>{r.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{dismiss:"",onClose:t[2]||(t[2]=()=>{r.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Deseja excluir esse item?")])),_:1})])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Uk)("O item será excluído permanentemente do banco de dados.")])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{color:"secondary",onClick:t[3]||(t[3]=()=>{r.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancelar")])),_:1}),(0,s.Wm)(d,{color:"primary",onClick:this.excluir},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirmar")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible"]),(0,s.Wm)(g,{ref:"toast"},null,512)],64)}var r=a(5066);const i={components:{Toast:r.Z},name:"IconsTdTable",props:{isActiveProps:Boolean,idItemProps:Number,serviceProps:Object},data(){return{isActive:this.isActiveProps,modalExcluir:!1,service:this.serviceProps}},computed:{},methods:{async excluir(){if(this.modalExcluir=!1,void 0!=this.idItemProps){let e=await this.service.excluir(this.idItemProps);204==e.status?(this.$refs.toast.createToast("Excluído com sucesso!"),this.$emit("get-all")):this.$refs.toast.createToast("Ocorreu um erro ao excluir item!")}},alterar(){this.$emit("alterar-item",this.idItemProps)}}};var o=a(89);const n=(0,o.Z)(i,[["render",l]]),c=n},2362:(e,t,a)=>{a.d(t,{Z:()=>f});var s=a(3396),l=a(7139);const r={key:0},i={class:"pagination"},o={class:"page-item"},n=(0,s._)("span",{"aria-hidden":"true"},"«",-1),c=[n],u=["onClick"],d={class:"page-item"},p=(0,s._)("span",{"aria-hidden":"true"},"»",-1),m=[p];function g(e,t,a,n,p,g){return p.totalPages>0?((0,s.wg)(),(0,s.iD)("nav",r,[(0,s._)("ul",i,[(0,s._)("li",o,[(0,s._)("a",{class:"page-link",onClick:t[0]||(t[0]=e=>g.previous()),"aria-label":"Previous"},c)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.totalPages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)([{active:g.isActive(e)},"page-item"]),key:e},[(0,s._)("a",{class:"page-link",onClick:t=>g.setNumberPage(e)},(0,l.zw)(e),9,u)],2)))),128)),(0,s._)("li",d,[(0,s._)("a",{class:"page-link",onClick:t[1]||(t[1]=e=>g.next()),"aria-label":"Next"},m)])])])):(0,s.kq)("",!0)}const h={name:"NextPageTable",props:{pageId:{type:Number,required:!0}},data(){return{page:this.pageId,totalPages:0,totalElements:0,last:!1,pageable:{pageNumber:0,pageSize:0}}},methods:{isActive(e){return e-1==this.pageable.pageNumber},setNumberPage(e){this.pageable.pageNumber=e-1,this.$emit("update-pageId",this.pageable.pageNumber)},previous(){0!=this.pageable.pageNumber&&(this.pageable.pageNumber=this.pageable.pageNumber-1,this.$emit("update-pageId",this.pageable.pageNumber))},next(){this.pageable.pageNumber<this.totalPages-1&&(this.pageable.pageNumber=this.pageable.pageNumber+1,this.$emit("update-pageId",this.pageable.pageNumber))}}};var b=a(89);const w=(0,b.Z)(h,[["render",g]]),f=w},5066:(e,t,a)=>{a.d(t,{Z:()=>c});var s=a(3396),l=a(7139);function r(e,t,a,r,i,o){const n=(0,s.up)("CToastBody"),c=(0,s.up)("CToast"),u=(0,s.up)("CToaster");return(0,s.wg)(),(0,s.j4)(u,{placement:"top-end"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.toasts,((e,t)=>((0,s.wg)(),(0,s.j4)(c,{key:t,color:i.color},{default:(0,s.w5)((()=>[(0,s.Wm)(n,null,{default:(0,s.w5)((()=>[(0,s._)("b",null,(0,l.zw)(e.content),1)])),_:2},1024)])),_:2},1032,["color"])))),128))])),_:1})}const i={data(){return{toasts:[],color:"info"}},methods:{createToast(e){this.color="light",this.toasts.push({content:e})},createToastDanger(e){this.color="danger",this.toasts.push({content:e})},createToastWarning(e){this.color="warning",this.toasts.push({content:e})}}};var o=a(89);const n=(0,o.Z)(i,[["render",r]]),c=n},5669:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(3396),l=a(9242),r=a(7139);const i=e=>((0,s.dD)("data-v-b2b5cd72"),e=e(),(0,s.Cn)(),e),o=i((()=>(0,s._)("h3",null,"Procedimentos",-1))),n={class:"row"},c={class:"col-md-12 mx-auto"},u={class:"input-group"},d={class:"input-group-append"},p={class:"bdr"};function m(e,t,a,i,m,g){const h=(0,s.up)("CCol"),b=(0,s.up)("CIcon"),w=(0,s.up)("router-link"),f=(0,s.up)("CRow"),_=(0,s.up)("CCardHeader"),x=(0,s.up)("CTableHeaderCell"),v=(0,s.up)("CTableRow"),y=(0,s.up)("CTableHead"),C=(0,s.up)("CTableDataCell"),T=(0,s.up)("IconsTdTable"),P=(0,s.up)("CTableBody"),k=(0,s.up)("CTable"),W=(0,s.up)("NextPageTable"),I=(0,s.up)("CCardBody"),$=(0,s.up)("CCard"),N=(0,s.up)("toast");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)($,{class:"mb-4"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(f,{class:"align-items-start"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[o])),_:1}),(0,s.Wm)(h,{id:"teste-align"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{to:"/forms/procedimento/cadastro"},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{icon:"cil-playlist-add",size:"xxl"})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",u,[(0,s.wy)((0,s._)("input",{class:"form-control border-end-0 border rounded-pill",type:"search",placeholder:"Buscar",id:"example-search-input","onUpdate:modelValue":t[0]||(t[0]=e=>m.searchText=e)},null,512),[[l.nr,m.searchText]]),(0,s._)("span",d,[(0,s._)("button",{class:"btn btn-outline-secondary bg-dark border-bottom-0 border rounded-pill ms-n5",type:"button",onClick:t[1]||(t[1]=(...e)=>g.getByDescription&&g.getByDescription(...e))},[(0,s.Wm)(b,{icon:"cil-magnifying-glass",size:"x"})])])])])]),(0,s._)("div",p,[(0,s.Wm)(k,{responsive:"xl"},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{color:"dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(x,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("#")])),_:1}),(0,s.Wm)(x,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Descrição")])),_:1}),(0,s.Wm)(x,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Valor")])),_:1}),(0,s.Wm)(x,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Ativo")])),_:1}),(0,s.Wm)(x,{scope:"col"})])),_:1})])),_:1}),(0,s.Wm)(P,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.itens,(e=>((0,s.wg)(),(0,s.j4)(v,{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.id),1)])),_:2},1024),(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e.description),1)])),_:2},1024),(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Uk)("R$ "+(0,r.zw)(e.price.toFixed(2)),1)])),_:2},1024),(0,s.Wm)(T,{isActiveProps:e.isActive,"id-item-props":e.id,serviceProps:m.service,onGetAll:g.consultaTodos,onAlterarItem:g.alterar},null,8,["isActiveProps","id-item-props","serviceProps","onGetAll","onAlterarItem"])])),_:2},1024)))),128))])),_:1})])),_:1}),(0,s.Wm)(W,{ref:"nextPageTable","page-id":m.pageId,onUpdatePageId:g.updatePageId},null,8,["page-id","onUpdatePageId"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(N,{ref:"toast"},null,512)],64)}var g=a(7853),h=a(5066),b=a(2362),w=a(7316);const f={components:{Toast:h.Z,NextPageTable:b.Z,IconsTdTable:w.Z},name:"Procedimento",data(){return{service:new g.Z,itens:"",modalExcluir:!1,idItem:"",searchText:"",pageId:0}},methods:{async consultaTodos(){let e=await this.service.getAllPaged(this.pageId);this.itens=e.content,this.$refs.nextPageTable.totalPages=e.totalPages,this.$refs.nextPageTable.totalElements=e.totalElements,this.$refs.nextPageTable.pageable.pageNumber=e.pageable.pageNumber},async excluir(){if(this.modalExcluir=!1,console.log(this.idItem),void 0!=this.idItem){let e=await this.service.excluir(this.idItem);204==e.status?(this.$refs.toast.createToast("Excluído com sucesso!"),this.consultaTodos()):this.$refs.toast.createToast("Ocorreu um erro ao excluir item!")}},alterar(e){this.$router.push({path:`/forms/procedimento/cadastro/${e}`})},async getByDescription(){let e=await this.service.getByDescriptionPaged(this.searchText,this.pageId);this.itens=e.content,this.$refs.nextPageTable.totalPages=e.totalPages,this.$refs.nextPageTable.totalElements=e.totalElements,this.$refs.nextPageTable.pageable.pageNumber=e.pageable.pageNumber},updatePageId(e){this.pageId=e,this.consultaTodos()}},mounted(){this.consultaTodos()}};var _=a(89);const x=(0,_.Z)(f,[["render",m],["__scopeId","data-v-b2b5cd72"]]),v=x}}]);
//# sourceMappingURL=669.f03aea7d.js.map