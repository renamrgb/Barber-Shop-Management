"use strict";(self["webpackChunkbsm"]=self["webpackChunkbsm"]||[]).push([[880],{2012:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(1505);class l{url="/expenses";replaceItem(e){return"string"!=typeof e.total&&(e.total=e.total.toString()),e.total=e.total.replace(",","."),e.total=parseFloat(e.total),e}async saveOrUpdate(e,t,a){return void 0!=t&&void 0==e&&t.forEach((e=>{a.installments.push({installmentValue:e.installmentValue,dueDate:e.dueDate})})),void 0==e?await this.cadastrar(this.replaceItem(a)):await this.alterar(this.replaceItem(a),e)}async consultarTodos(){try{const e=await s.Z.get(this.url);return e.data}catch(e){return e}}async cadastrar(e){try{e.expenseType.generateInstallments||e.installments.push({installmentValue:e.total,dueDate:e.dueDate});const t=await s.Z.post(this.url,e);return t}catch(t){return t}}async alterar(e,t){try{const a=await s.Z.put(`${this.url}/${t}`,e);return a}catch(a){return a}}async generateInstallments(e){try{const t=await s.Z.post(`${this.url}/generateInstallments`,e);return t.data}catch(t){return t}}async getOneExpense(e){try{const t=await s.Z.get(`${this.url}/${e}`);return t.data}catch(t){return t}}async delete(e){try{const t=await s.Z["delete"](`${this.url}/${e}`);return t.data}catch(t){return t.response.data}}async getAllPaged(e,t){try{const a=await s.Z.get(`${this.url}/paged?dtStart=${t.dtStart}&dtEnd=${t.dtEnd}&bringPaid=${t.bringPaid}&page=${e}`);return a.data}catch(a){return a}}async getByDescriptionPaged(e,t,a){try{const l=await s.Z.get(`${this.url}/paged?dtStart=${a.dtStart}&dtEnd=${a.dtEnd}&description=${e}&bringPaid=${a.bringPaid}&page=${t}`);return l.data}catch(l){return l}}async payOffExpense(e,t,a){try{a.amountPaid=a.amountPaid.replace(",",".");const l=await s.Z.post(`${this.url}/payOffExpense/${e}?installmentId=${t}`,a);return l}catch(l){return l}}async reverse(e,t){try{const a=await s.Z.post(`${this.url}/reverse?expenseId=${e}&installmentId=${t}`);return a}catch(a){return a}}}},1982:(e,t,a)=>{a.d(t,{Z:()=>l});var s=a(1505);class l{url="/paymentMethod";async consultarFormasPagamento(){try{const e=await s.Z.get(this.url);return e.data}catch(e){return e}}async getAllPaged(e){try{const t=await s.Z.get(`${this.url}/paged?page=${e}`);return t.data}catch(t){return t}}async cadastrar(e){try{const t=await s.Z.post(this.url,e);return t}catch(t){return t}}async excluir(e){try{const t=await s.Z["delete"](`${this.url}/${e}`);return t}catch(t){return t}}async alterar(e,t){try{const a=await s.Z.put(`${this.url}/${e}`,t);return a}catch(a){return a}}async buscarUmaformaDePagamento(e){try{const t=await s.Z.get(`${this.url}/${e}`);return t}catch(t){return t}}async getByDescription(e){try{const t=await s.Z.get(`${this.url}?description=${e}`);return t.data}catch(t){return t}}async getByDescriptionPaged(e,t){try{const a=await s.Z.get(`${this.url}/paged?description=${e}&page=${t}`);return a.data}catch(a){return a}}}},5691:(e,t,a)=>{a.d(t,{Z:()=>s});class s{agora=(new Date).toLocaleString("pt-BR",{timeZone:"America/Sao_Paulo"});dateNowISO(){const[e,t,a]=this.agora.split(/[\/\s,:]+/),s=`${a}-${t.padStart(2,"0")}-${e.padStart(2,"0")}`;return s}date(e,t,a){return"+"==a?e.setDate(e.getDate()+t):e.setDate(e.getDate()-t),this.formatDateISO(e.toLocaleString())}formatDateISO(e){const[t,a,s]=e.split(/[\/\s,:]+/),l=`${s}-${a.padStart(2,"0")}-${t.padStart(2,"0")}`;return l}compareDates(e){const t=new Date(e),a=new Date(this.formatDateISO(this.agora)),s=a.getTime()-t.getTime(),l=864e5,n=Math.floor(s/l);return n}}},5017:(e,t,a)=>{a.d(t,{Z:()=>s});class s{toDateBr(e){const t=new Date(e);let a=t.getUTCDate().toString().padStart(2,"0"),s=(t.getUTCMonth()+1).toString().padStart(2,"0"),l=t.getUTCFullYear(),n=`${a}/${s}/${l}`;return n}}},2362:(e,t,a)=>{a.d(t,{Z:()=>b});var s=a(3396),l=a(7139);const n={key:0},i={class:"pagination"},r={class:"page-item"},o=(0,s._)("span",{"aria-hidden":"true"},"«",-1),d=[o],u=["onClick"],p={class:"page-item"},c=(0,s._)("span",{"aria-hidden":"true"},"»",-1),m=[c];function g(e,t,a,o,c,g){return c.totalPages>0?((0,s.wg)(),(0,s.iD)("nav",n,[(0,s._)("ul",i,[(0,s._)("li",r,[(0,s._)("a",{class:"page-link",onClick:t[0]||(t[0]=e=>g.previous()),"aria-label":"Previous"},d)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.totalPages,(e=>((0,s.wg)(),(0,s.iD)("li",{class:(0,l.C_)([{active:g.isActive(e)},"page-item"]),key:e},[(0,s._)("a",{class:"page-link",onClick:t=>g.setNumberPage(e)},(0,l.zw)(e),9,u)],2)))),128)),(0,s._)("li",p,[(0,s._)("a",{class:"page-link",onClick:t[1]||(t[1]=e=>g.next()),"aria-label":"Next"},m)])])])):(0,s.kq)("",!0)}const h={name:"NextPageTable",props:{pageId:{type:Number,required:!0}},data(){return{page:this.pageId,totalPages:0,totalElements:0,last:!1,pageable:{pageNumber:0,pageSize:0}}},methods:{isActive(e){return e-1==this.pageable.pageNumber},setNumberPage(e){this.pageable.pageNumber=e-1,this.$emit("update-pageId",this.pageable.pageNumber)},previous(){0!=this.pageable.pageNumber&&(this.pageable.pageNumber=this.pageable.pageNumber-1,this.$emit("update-pageId",this.pageable.pageNumber))},next(){this.pageable.pageNumber<this.totalPages-1&&(this.pageable.pageNumber=this.pageable.pageNumber+1,this.$emit("update-pageId",this.pageable.pageNumber))}}};var w=a(89);const f=(0,w.Z)(h,[["render",g]]),b=f},880:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var s=a(3396),l=a(9242),n=a(7139);const i=e=>((0,s.dD)("data-v-e70fafa0"),e=e(),(0,s.Cn)(),e),r=i((()=>(0,s._)("h4",null,"Despesas",-1))),o={class:"row mb-3"},d={class:"col-md-12 mx-auto"},u={class:"input-group"},p={class:"input-group-append"},c={class:"row mb-2"},m={class:"col"},g={class:"row mb-3"},h={class:"col-2"},w={class:"col-2"},f={class:"row mb-0"},b={class:"col"},y={class:"bdr"};function _(e,t,a,i,_,D){const x=(0,s.up)("CCol"),v=(0,s.up)("CIcon"),W=(0,s.up)("router-link"),C=(0,s.up)("CRow"),k=(0,s.up)("CCardHeader"),$=(0,s.up)("CFromLabel"),P=(0,s.up)("CFormSwitch"),U=(0,s.up)("CCardBody"),I=(0,s.up)("CCard"),T=(0,s.up)("CTableHeaderCell"),S=(0,s.up)("CTableRow"),Z=(0,s.up)("CTableHead"),E=(0,s.up)("CTableDataCell"),N=(0,s.up)("CButton"),V=(0,s.up)("CTableBody"),B=(0,s.up)("CTable"),M=(0,s.up)("NextPageTable"),F=(0,s.up)("CModalTitle"),O=(0,s.up)("CModalHeader"),z=(0,s.up)("CModalBody"),H=(0,s.up)("CModalFooter"),A=(0,s.up)("CModal"),q=(0,s.up)("toast"),L=(0,s.up)("QuitarDespesa");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(x,{xs:12},{default:(0,s.w5)((()=>[(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k,null,{default:(0,s.w5)((()=>[(0,s.Wm)(C,null,{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[r])),_:1}),(0,s.Wm)(x,{id:"teste-align"},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{to:"/expense/form"},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{icon:"cil-playlist-add",size:"xxl"})])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s._)("div",d,[(0,s._)("div",u,[(0,s.wy)((0,s._)("input",{class:"form-control border-end-0 border rounded-pill",type:"search",placeholder:"Buscar",id:"example-search-input","onUpdate:modelValue":t[0]||(t[0]=e=>_.searchText=e)},null,512),[[l.nr,_.searchText]]),(0,s._)("span",p,[(0,s._)("button",{class:"btn btn-outline-secondary bg-dark border-bottom-0 border rounded-pill ms-n5",type:"button",onClick:t[1]||(t[1]=(...e)=>D.getByDescription&&D.getByDescription(...e))},[(0,s.Wm)(v,{icon:"cil-magnifying-glass",size:"x"})])])])])]),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(U,null,{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s._)("div",m,[(0,s.Wm)($,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Data de lançamento da despesa:")])),_:1})])]),(0,s._)("div",g,[(0,s._)("div",h,[(0,s.wy)((0,s._)("input",{type:"date",name:"",id:"",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>_.filter.dtStart=e)},null,512),[[l.nr,_.filter.dtStart]])]),(0,s._)("div",w,[(0,s.wy)((0,s._)("input",{type:"date",name:"",id:"",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>_.filter.dtEnd=e)},null,512),[[l.nr,_.filter.dtEnd]])])]),(0,s._)("div",f,[(0,s._)("div",b,[(0,s.Wm)(P,{id:"formSwitchCheckDefault",label:"Apenas despesas pagas",modelValue:_.filter.bringPaid,"onUpdate:modelValue":t[4]||(t[4]=e=>_.filter.bringPaid=e)},null,8,["modelValue"])])])])),_:1})])),_:1}),(0,s._)("div",y,[(0,s.Wm)(B,{responsive:"xl"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{class:"table-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,null,{default:(0,s.w5)((()=>[(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("#")])),_:1}),(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Data de lançamento")])),_:1}),(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Descrição")])),_:1}),(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Valor")])),_:1}),(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Tipo De Despesa")])),_:1}),(0,s.Wm)(T,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Qtde Parcelas")])),_:1}),(0,s.Wm)(T,{scope:"col"})])),_:1})])),_:1}),(0,s.Wm)(V,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.itens,(e=>((0,s.wg)(),(0,s.j4)(S,{key:e.id},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.id),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(_.formatDateBr.toDateBr(e.releaseDate)),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.description),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Uk)("R$ "+(0,n.zw)(e.total.toFixed(2)),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.expenseType.description),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.quantityOfInstallments),1)])),_:2},1024),(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)(N,{color:"light",onClick:t=>D.payOffExpense(e),style:{"margin-right":"1%"}},{default:(0,s.w5)((()=>[(0,s.Uk)("Quitar")])),_:2},1032,["onClick"]),(0,s.Wm)(N,{color:"light",style:{"margin-right":"1%"},onClick:()=>{_.modalExcluir=!0,_.id=e.id}},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{icon:"cil-trash",size:"x"})])),_:2},1032,["onClick"]),(0,s.Wm)(N,{color:"light",style:{"margin-right":"1%"},onClick:t=>this.alterar(e.id)},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{icon:"cil-pencil",size:"x"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,s.Wm)(M,{ref:"nextPageTable","page-id":_.pageId,onUpdatePageId:D.updatePageId},null,8,["page-id","onUpdatePageId"])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(A,{visible:_.modalExcluir,onClose:t[8]||(t[8]=()=>{_.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{dismiss:"",onClose:t[5]||(t[5]=()=>{_.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Deseja excluir esse item?")])),_:1})])),_:1}),(0,s.Wm)(z,null,{default:(0,s.w5)((()=>[(0,s.Uk)("O item será excluído permanentemente do banco de dados.")])),_:1}),(0,s.Wm)(H,null,{default:(0,s.w5)((()=>[(0,s.Wm)(N,{color:"secondary",onClick:t[6]||(t[6]=()=>{_.modalExcluir=!1})},{default:(0,s.w5)((()=>[(0,s.Uk)("Cancelar")])),_:1}),(0,s.Wm)(N,{color:"primary",onClick:t[7]||(t[7]=e=>this.delete())},{default:(0,s.w5)((()=>[(0,s.Uk)("Confirmar")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,s.Wm)(q,{ref:"toast"},null,512),(0,s.Wm)(L,{ref:"quitarDespesa"},null,512)],64)}var D=a(2012),x=a(5066),v=a(6947),W=a(2362);const C={class:"row mb-3"},k={class:"col mb-auto"},$={class:"col-md-3"},P={class:"row"},U={class:"bdr"},I=["onUpdate:modelValue","disabled"],T=["onUpdate:modelValue","disabled"];function S(e,t,a,i,r,o){const d=(0,s.up)("CModalTitle"),u=(0,s.up)("CModalHeader"),p=(0,s.up)("CFormLabel"),c=(0,s.up)("CTableHeaderCell"),m=(0,s.up)("CTableRow"),g=(0,s.up)("CTableHead"),h=(0,s.up)("CInputGroupText"),w=(0,s.up)("CInputGroup"),f=(0,s.up)("CFormSelect"),b=(0,s.up)("CButton"),y=(0,s.up)("CTableBody"),_=(0,s.up)("CTable"),D=(0,s.up)("CModalBody"),x=(0,s.up)("CModalFooter"),v=(0,s.up)("CModal"),W=(0,s.up)("toast");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(v,{size:"xl",visible:r.visibleLiveDemo,onClose:t[3]||(t[3]=()=>{r.visibleLiveDemo=!1})},{default:(0,s.w5)((()=>[(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("Quitar Despesa")])),_:1})])),_:1}),(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s._)("div",C,[(0,s._)("div",k,[(0,s.Wm)(p,{for:"description"},{default:(0,s.w5)((()=>[(0,s.Uk)("* Descrição")])),_:1}),(0,s.wy)((0,s._)("input",{name:"description",type:"text",class:"form-control",placeholder:"","onUpdate:modelValue":t[0]||(t[0]=e=>r.expense.description=e),disabled:""},null,512),[[l.nr,r.expense.description]])]),(0,s._)("div",$,[(0,s.Wm)(p,{for:"releaseDate"},{default:(0,s.w5)((()=>[(0,s.Uk)("* Data de lançamento")])),_:1}),(0,s.wy)((0,s._)("input",{type:"date",name:"releaseDate","onUpdate:modelValue":t[1]||(t[1]=e=>r.expense.releaseDate=e),class:"form-control",disabled:""},null,512),[[l.nr,r.expense.releaseDate]])])]),(0,s._)("div",P,[(0,s._)("div",U,[(0,s.Wm)(_,{responsive:"xl"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"table-dark"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("#")])),_:1}),(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Valor Da Parcela")])),_:1}),(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Vencimento")])),_:1}),(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Valor Pago")])),_:1}),(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Forma De Pagamento")])),_:1}),(0,s.Wm)(c,{scope:"col"},{default:(0,s.w5)((()=>[(0,s.Uk)("Data Do Pagamento")])),_:1}),(0,s.Wm)(c,{scope:"col"})])),_:1})])),_:1}),(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(this.expense.installments,((e,t)=>((0,s.wg)(),(0,s.j4)(m,{key:t},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(e.id),1)])),_:2},1024),(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Uk)("R$ "+(0,n.zw)(e.installmentValue.toFixed(2)),1)])),_:2},1024),(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(this.formatDateBr.toDateBr(e.dueDate)),1)])),_:2},1024),(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)("R$")])),_:1}),(0,s.wy)((0,s._)("input",{name:"price","onUpdate:modelValue":t=>e.amountPaid=t,class:"form-control",disabled:r.disabledInputs[t].disabled},null,8,I),[[l.nr,e.amountPaid]])])),_:2},1024)])),_:2},1024),(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{options:r.optionsSelect,searchable:!0,modelValue:e.paymentMethod.id,"onUpdate:modelValue":t=>e.paymentMethod.id=t,disabled:r.disabledInputs[t].disabled},null,8,["options","modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s._)("input",{type:"date",class:"form-control",name:"paymentDate",id:"paymentDate","onUpdate:modelValue":t=>e.paymentDate=t,disabled:r.disabledInputs[t].disabled},null,8,T),[[l.nr,e.paymentDate]])])),_:2},1024),(0,s.Wm)(c,{scope:"row"},{default:(0,s.w5)((()=>[0==e.paid?((0,s.wg)(),(0,s.j4)(b,{key:0,color:"primary",variant:"outline",onClick:a=>o.baixar(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)("Baixar")])),_:2},1032,["onClick"])):1==e.paid?((0,s.wg)(),(0,s.j4)(b,{key:1,color:"primary",variant:"outline",onClick:a=>o.estornar(t,e)},{default:(0,s.w5)((()=>[(0,s.Uk)("Estornar")])),_:2},1032,["onClick"])):(0,s.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])])])),_:1}),(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{color:"secondary",onClick:t[2]||(t[2]=()=>{r.visibleLiveDemo=!1})},{default:(0,s.w5)((()=>[(0,s.Uk)(" Fechar ")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,s.Wm)(W,{ref:"toast"},null,512)],64)}var Z=a(3053),E=a(7829),N=a(1982),V=a(5017),B=a(5691);const M={components:{Toast:x.Z},name:"QuitarDepesa",data(){return{v$:(0,Z.Xw)(),dateNow:new B.Z,validationsMessage:new E.Z,formatDateBr:new V.Z,formaPagamentoService:new N.Z,service:new D.Z,visibleLiveDemo:!1,visibleLiveDemo2:!1,paymentMethod:{id:""},service:new D.Z,expense:{description:"",releaseDate:"",amountPaid:"",paymentDate:""},optionsSelect:["Abra este menu de seleção"],disabledInputs:[]}},methods:{async carregarOptionsSelect(){let e=await this.formaPagamentoService.consultarFormasPagamento();e.forEach((e=>{this.optionsSelect.push({value:e.id,label:e.description})}))},setStateInputInstallment(e){for(let t=0;t<e;t++)this.disabledInputs.push({disabled:!0})},baixar(e){this.disabledInputs[e].disabled?0==e&&0==this.expense.installments[e].paid?this.disabledInputs[e].disabled=!1:e>0&&0==this.expense.installments[e-1].paid?(this.disabledInputs[e].disabled=!0,this.$refs.toast.createToastDanger("Você não pode quitar essa parcela, a anterior ainda não está paga!")):this.disabledInputs[e].disabled=!1:this.save(e)},async save(e){let t={amountPaid:this.expense.installments[e].amountPaid,paymentMethod:{id:this.expense.installments[e].paymentMethod.id},paymentDate:this.expense.installments[e].paymentDate};if(this.validForm(e)){let a=await this.service.payOffExpense(this.expense.id,e,t);200==a.status&&(a=a.data,t.amountPaid>this.expense.installments[e].installmentValue?this.$refs.toast.createToastWarning("A despesa foi quitada com o valor superior ao valor da parcela."):this.$refs.toast.createToast("Quitação feita com sucesso!"),this.disabledInputs[e].disabled=!0,this.expense.installments[e].paymentDate=a.installments[e].paymentDate,this.expense.installments[e].paid=a.installments[e].paid)}},async estornar(e){let t=await this.service.reverse(this.expense.id,e);200==t.status&&(t=t.data,this.$refs.toast.createToast("Estorno feito com sucesso!"),this.expense.installments[e].amountPaid=t.installments[e].amountPaid,this.expense.installments[e].paymentMethod.id=t.installments[e].paymentMethod.id=0,this.expense.installments[e].paymentDate=t.installments[e].paymentDate,this.expense.installments[e].paid=t.installments[e].paid)},validForm(e){let t=!0,a=parseInt(this.expense.installments[e].amountPaid),s=this.expense.installments[e].installmentValue,l=this.expense.installments[e].paymentMethod.id,n=this.expense.installments[e].paymentDate;return void 0!=l&&"Abra este menu de seleção"!=l||(t=!1,this.$refs.toast.createToastDanger("Preencha o campo forma de pagamento!")),a<s&&(t=!1,this.$refs.toast.createToastDanger("O valor pago deve ser maior ou igual ao valor da parcela!")),(void 0==n||n>this.dateNow.dateNowISO())&&(t=!1,this.$refs.toast.createToastDanger("A data de pagamento não pode ser maior que a data atual ou vazia!")),t}},mounted(){this.carregarOptionsSelect()},beforeUpdate(){this.setStateInputInstallment(30)}};var F=a(89);const O=(0,F.Z)(M,[["render",S]]),z=O,H={components:{Toast:x.Z,CForm:v.lx,NextPageTable:W.Z,CTableDataCell:v.NN,QuitarDespesa:z},name:"FormaPagamento",data(){return{id:"",dateNow:new B.Z,service:new D.Z,formatDateBr:new V.Z,itens:"",modalExcluir:!1,id:"",searchText:"",pageId:0,searchText:"",filter:{dtStart:"",dtEnd:"",bringPaid:!1}}},methods:{getDate(){this.filter.dtStart=this.dateNow.date(new Date,30,"-"),this.filter.dtEnd=this.dateNow.dateNowISO()},async delete(){let e=await this.service.delete(this.id);400==e.status&&this.$refs.toast.createToastDanger(e.message),this.modalExcluir=!1,this.getExpenses()},async getByDescription(){let e=await this.service.getByDescriptionPaged(this.searchText,this.pageId,this.filter);this.itens=e.content,this.$refs.nextPageTable.totalPages=e.totalPages,this.$refs.nextPageTable.totalElements=e.totalElements,this.$refs.nextPageTable.pageable.pageNumber=e.pageable.pageNumber},async getExpenses(){let e=await this.service.getAllPaged(this.pageId,this.filter);this.itens=e.content,this.$refs.nextPageTable.totalPages=e.totalPages,this.$refs.nextPageTable.totalElements=e.totalElements,this.$refs.nextPageTable.pageable.pageNumber=e.pageable.pageNumber},alterar(e){this.$router.push({path:`/expense/form/${e}`})},updatePageId(e){this.pageId=e,this.getExpenses()},payOffExpense(e){this.$refs.quitarDespesa.visibleLiveDemo=!0,this.$refs.quitarDespesa.expense=e}},mounted(){this.getDate(),this.getExpenses()}},A=(0,F.Z)(H,[["render",_],["__scopeId","data-v-e70fafa0"]]),q=A}}]);
//# sourceMappingURL=880.2c6418a8.js.map